{"version":3,"file":"375.c294462b.iframe.bundle.js","mappings":";AAiOA;AACA;AACA;AAqIA;AACA;AACA","sources":["webpack://@indy/flow-web/./app/component/library/Section/components/article/ArticleHeroNew.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { css, styled } from 'styled-components';\n\nimport { withRequest } from '@brightsites/flow-core/lib/providers/RequestProvider';\n\nimport * as breakPoints from '#app/constants/breakpoints';\nimport {\n  CLASS_PREMIUM_BADGING,\n  CLASS_TABOOLA_EXCLUDED,\n} from '#app/constants/classNames';\nimport * as device from '#app/constants/devices';\n\nimport { isVideoHero } from '#app/services/article';\n\nimport { getClassName } from '#app/util/classes';\nimport { hex2rgba } from '#app/util/colours';\nimport { getComponentTheme } from '#app/util/themes';\n\nimport Camera from '#app/component/library/icons/Camera';\nimport Video from '#app/component/library/icons/Video';\n\nimport ArticleAuthor from './ArticleAuthor';\nimport ArticleCapsule from './ArticleCapsule';\nimport ArticleHeadline from './ArticleHeadline';\nimport ArticleIcon from './ArticleIcon';\nimport ArticleImageNew from './ArticleImageNew';\nimport ArticleLead from './ArticleLead';\nimport ArticleRelated from './ArticleRelated';\nimport ArticleTitle from './ArticleTitle';\nimport {\n  articleItemHoverColor,\n  articleItemPrimaryColor,\n  relatedArticleIcon,\n} from './helpers';\nimport isSectionArticlePremiumThemed from './helpers/isSectionArticlePremiumThemed';\n\nexport const articleHeroBackground = ({ sectionTheme, theme: { color } }) =>\n  sectionTheme === 'premium'\n    ? color.premium.dark.canvas.card\n    : sectionTheme === 'climate'\n      ? color.climate.primary.base\n      : sectionTheme === 'sgi'\n        ? color.sgi.primary.base\n        : hex2rgba(color.primary.base, 0.8);\n\nconst Wrapper = styled.div``;\n\nconst ArticleHeroNew = styled(\n  ({\n    req,\n    res,\n    section,\n    className,\n    heroSrcset,\n    configuration,\n    hideWow,\n    data,\n    data: {\n      path,\n      titleShort,\n      title,\n      hero,\n      lead,\n      sections,\n      sponsorName,\n      premium,\n      capsuleSection,\n      capsuleHighlight,\n      isLiveBlog,\n      isLiveVideo,\n      relatedLinks,\n      showRelatedLinks,\n      showLead,\n      taboolaExcluded,\n      extra,\n    },\n    sectionTheme,\n    includeLead = false,\n    fromDMPU = false,\n    preloadImage = false,\n    fetchImagePriority,\n    isParentPremium,\n    isSideColumn,\n    imageCropRatio,\n    shouldRenderAsImageOverlay = false,\n  }) => {\n    const theme = getComponentTheme(data, configuration);\n    const videoArticle = isVideoHero(hero);\n    const articleIcon = ArticleIcon(videoArticle);\n    const isPremiumThemed = isSectionArticlePremiumThemed(\n      premium,\n      section,\n      req,\n      res,\n    );\n\n    return (\n      <Wrapper\n        className={getClassName(className, 'hero-article', {\n          'article-premium': isPremiumThemed,\n          'from-dmpu': fromDMPU,\n          [`article-${sectionTheme}`]: sectionTheme?.length > 0,\n          [CLASS_TABOOLA_EXCLUDED]: taboolaExcluded,\n          'article-image-overlay': shouldRenderAsImageOverlay,\n        })}\n      >\n        <ArticleImageNew\n          hero={hero}\n          heroSrcset={heroSrcset}\n          path={path}\n          preload={preloadImage}\n          fetchPriority={fetchImagePriority}\n          cropRatio={imageCropRatio}\n        />\n        <ArticleCapsule\n          $sectionTheme={sectionTheme}\n          sections={sections}\n          sponsorName={sponsorName}\n          override={capsuleSection}\n          highlight={capsuleHighlight}\n          isLiveBlog={isLiveBlog}\n          isLiveVideo={isLiveVideo}\n          sponsoredCapsule={extra?.isShowSponsoredCapsule}\n          hideWow={hideWow}\n          premium={isPremiumThemed}\n          path={path}\n        />\n        <div\n          className={getClassName('content', {\n            'content-media': theme !== 'voices' && articleIcon,\n            [CLASS_PREMIUM_BADGING]: isPremiumThemed,\n          })}\n        >\n          {theme !== 'voices' && articleIcon}\n          {/* To not include Author name on HeroPlusDMPU component on Premium sections */}\n          <ArticleHeadline\n            sectionTheme={sectionTheme}\n            premium={isPremiumThemed}\n          >\n            <ArticleTitle\n              path={path}\n              title={title}\n              titleShort={titleShort}\n              sectionTheme={sectionTheme}\n            />\n          </ArticleHeadline>\n          {includeLead && showLead && (\n            <ArticleLead className=\"lead\">{lead}</ArticleLead>\n          )}\n          {showRelatedLinks && relatedLinks && (\n            <ArticleRelated\n              relatedLinks={relatedLinks}\n              sectionTheme={sectionTheme}\n              isParentPremium={isPremiumThemed || isParentPremium}\n              isSideColumn={isSideColumn}\n            />\n          )}\n        </div>\n      </Wrapper>\n    );\n  },\n)`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  .title,\n  .lead,\n  .lead p {\n    color: ${(props) => props.theme.color.dark.ink.base};\n  }\n\n  .capsules {\n    display: flex;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  .capsule {\n    display: flex;\n    padding: 6px 8px 4px;\n    color: ${(props) => props.theme.color.ink.inverted};\n    font-size: 12px;\n    letter-spacing: 0.26px;\n    line-height: 12px;\n  }\n\n  .capsule-highlight {\n    margin-right: 0;\n    background: ${(props) => props.theme.color.semiotic.live};\n    color: ${(props) => props.theme.color.ink.base};\n  }\n\n  .live-blog::before {\n    background-position: center;\n  }\n\n  .image-wrap {\n    display: flex;\n    width: 100%;\n    height: auto;\n    flex-direction: column;\n    flex-grow: 1;\n\n    amp-img,\n    img {\n      aspect-ratio: 3 / 2;\n    }\n\n    img {\n      display: block;\n    }\n  }\n\n  .placeholder {\n    img {\n      object-fit: cover;\n    }\n  }\n\n  .content {\n    ${({ theme }) => {\n      const color = theme.color.dark.canvas.card;\n      return css`\n        --content-bg: ${color};\n        --content-bg-opaque: ${hex2rgba(color, 0.7)};\n      `;\n    }}\n    position: relative;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 8px;\n    background: var(--content-bg);\n\n    @media ${device.laptop} {\n      padding: 16px;\n    }\n\n    h2 {\n      letter-spacing: -0.0208em;\n    }\n  }\n\n  ${ArticleHeadline} {\n    margin: 0;\n    font-size: 24px;\n    font-weight: bold;\n    line-height: 28px;\n\n    .title {\n      color: ${(props) => props.theme.color.dark.ink.base};\n\n      &:hover {\n        color: ${articleItemHoverColor};\n      }\n    }\n  }\n\n  ${ArticleRelated}:empty {\n    display: none;\n  }\n\n  ${ArticleRelated} li::before {\n    background-image: url(${relatedArticleIcon});\n  }\n\n  ${ArticleRelated} a:hover {\n    color: ${articleItemHoverColor};\n  }\n\n  .content-media {\n    position: relative;\n    padding-top: 24px;\n  }\n\n  .lead {\n    padding-top: 8px;\n  }\n\n  .lead + ${ArticleRelated} {\n    margin-top: 12px;\n  }\n\n  .lead a {\n    color: ${articleItemPrimaryColor};\n\n    &:hover {\n      color: ${articleItemHoverColor};\n    }\n  }\n\n  .lead,\n  .lead p {\n    margin: 0;\n    font-family: ${(props) => props.theme.fontFamily.secondaryFont};\n    font-size: 14px;\n    font-weight: normal;\n    line-height: 18px;\n\n    @media ${device.laptop} {\n      font-size: 16px;\n      line-height: 20px;\n    }\n  }\n  ${Camera}, ${Video} {\n    display: flex;\n    position: absolute;\n    top: -15px;\n    left: 8px;\n    width: 32px;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    background-color: ${articleHeroBackground};\n\n    @media ${device.tablet} {\n      left: 12px;\n    }\n\n    > svg {\n      width: 60%;\n      fill: ${(props) => props.theme.color.canvas.base};\n      stroke: transparent;\n    }\n  }\n  ${Video} {\n    > svg {\n      width: 80%;\n    }\n  }\n\n  ${ArticleRelated} {\n    margin-top: 8px;\n  }\n\n  &.from-dmpu {\n    .content {\n      @media ${device.maxTablet} {\n        position: relative;\n        background: ${(props) => props.theme.color.dark.canvas.base};\n        opacity: 1;\n      }\n    }\n  }\n\n  &.article-voices {\n    ${ArticleAuthor} {\n      &:hover {\n        color: ${(props) => props.theme.color.actionBrand.base};\n      }\n    }\n  }\n\n  &.article-premium {\n    .content {\n      ${({ theme }) => {\n        const color = theme.color.premium.dark.canvas.card;\n        return css`\n          --content-bg: ${color};\n          --content-bg-opaque: ${hex2rgba(color, 0.7)};\n        `;\n      }}\n      display: flex;\n      box-sizing: border-box;\n      flex-direction: column;\n\n      @media ${device.laptop} {\n        padding-bottom: 8px;\n      }\n    }\n\n    .${CLASS_PREMIUM_BADGING}::after {\n      margin-top: auto;\n      background-image: url(https://static.independent.co.uk/static-assets/logo-premium-light.svg);\n      color: ${({ theme }) => theme.color.premium.divider.brand};\n    }\n\n    .title:hover {\n      color: ${(props) => props.theme.color.premium.actionBrand.alt};\n    }\n\n    ${ArticleRelated} a:hover {\n      color: ${(props) => props.theme.color.premium.actionBrand.alt};\n    }\n\n    ${ArticleRelated} li::before {\n      background-image: url(/img/icons/related-links-premium-new.svg);\n    }\n\n    .capsule:not(.capsule-highlight) {\n      background-color: ${(props) => props.theme.color.premium.primary.base};\n    }\n\n    ${ArticleAuthor} {\n      display: block;\n      color: ${(props) => props.theme.color.actionBrand.base};\n      font-family: ${(props) => props.theme.fontFamily.secondaryFont};\n      font-size: 14px;\n      font-style: normal;\n      font-weight: bold;\n      line-height: 1.4em;\n      text-transform: uppercase;\n\n      &:hover {\n        color: ${(props) => props.theme.color.actionBrand.alt};\n      }\n    }\n    ${Camera}, ${Video} {\n      background: ${({ theme }) =>\n        hex2rgba(theme.color.premium.primary.base, 0.8)};\n    }\n\n    .lead a {\n      color: ${(props) => props.theme.color.premium.actionBrand.base};\n      font-weight: bold;\n\n      &:hover {\n        color: ${(props) => props.theme.color.premium.actionBrand.alt};\n      }\n    }\n  }\n\n  &.article-best {\n    .title {\n      .highlight {\n        color: ${(props) => props.theme.color.actionBrand.base};\n        font-family: ${(props) => props.theme.fontFamily.secondaryFont};\n        text-transform: uppercase;\n\n        &:hover {\n          color: ${(props) => props.theme.color.actionBrand.alt};\n        }\n      }\n    }\n  }\n\n  &.article-image-overlay {\n    @media ${device.tablet} {\n      --parent-width: ${breakPoints.tablet}px;\n      --parent-padding: ${({ theme }) => theme.spacing.x3}px;\n      --container-width: calc(var(--parent-width) - var(--parent-padding));\n      --three-by-two-image-ratio: calc(3 / 2);\n      --overlapping-point-default: ${breakPoints.mobileS / 2}px;\n      --image-content-overlapping-point: var(--overlapping-point-default);\n      --overlapping-point-without-gap: calc(\n        var(--image-content-overlapping-point) - 1px\n      );\n\n      .image-wrap {\n        flex-shrink: 0;\n      }\n\n      .content {\n        min-height: var(--image-content-overlapping-point);\n        box-sizing: border-box;\n        flex-shrink: 0;\n        background: linear-gradient(\n            to top,\n            var(--content-bg) var(--image-content-overlapping-point),\n            var(--content-bg-opaque) 100%\n          )\n          no-repeat;\n        transform: translateY(\n          calc(-100% + var(--overlapping-point-without-gap))\n        );\n      }\n    }\n\n    @media ${device.laptop} {\n      --parent-width: ${breakPoints.laptop}px;\n      --parent-padding: ${({ theme }) => theme.spacing.x4}px;\n    }\n  }\n`;\n\nArticleHeroNew.propTypes = {\n  req: PropTypes.object.isRequired,\n  res: PropTypes.object.isRequired,\n  section: PropTypes.object,\n  className: PropTypes.string,\n  heroSrcset: PropTypes.array,\n  configuration: PropTypes.object,\n  hideWow: PropTypes.bool,\n  sectionTheme: PropTypes.string,\n  includeLead: PropTypes.bool,\n  fromDMPU: PropTypes.bool,\n  preloadImage: PropTypes.bool,\n  fetchImagePriority: PropTypes.string,\n  isParentPremium: PropTypes.bool,\n  isSideColumn: PropTypes.bool,\n  imageCropRatio: PropTypes.string,\n  shouldRenderAsImageOverlay: PropTypes.bool,\n  data: PropTypes.shape({\n    path: PropTypes.string,\n    titleShort: PropTypes.string,\n    title: PropTypes.string,\n    hero: PropTypes.array,\n    lead: PropTypes.string,\n    sections: PropTypes.array,\n    sponsorName: PropTypes.string,\n    premium: PropTypes.bool,\n    capsuleSection: PropTypes.object,\n    capsuleHighlight: PropTypes.object,\n    isLiveBlog: PropTypes.bool,\n    isLiveVideo: PropTypes.bool,\n    relatedLinks: PropTypes.array,\n    showRelatedLinks: PropTypes.bool,\n    showLead: PropTypes.bool,\n    taboolaExcluded: PropTypes.bool,\n    extra: PropTypes.object,\n  }),\n};\n\nexport default styled(withRequest(ArticleHeroNew))``;\n"],"names":[],"sourceRoot":""}