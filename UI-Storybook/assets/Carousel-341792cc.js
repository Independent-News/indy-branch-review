var M=Object.defineProperty;var r=(t,e)=>M(t,"name",{value:e,configurable:!0});import{j as v}from"./jsx-runtime-1a1b98e7.js";import{r as c}from"./index-29d3bc65.js";import{d as A}from"./styled-components.browser.esm-852d80e5.js";import{h as _}from"./mixins-cd1fe61f.js";import{P as C}from"./index-f7d1b020.js";const W=0,D=1,G="",z=r((t,e)=>{const s=!Array.isArray(t),n=typeof e!="number",o=e<=0||e%1!==0;if(s)throw new Error("`items` should be an array");if(n)throw new Error("`n` should be a number");if(o)throw new Error("`n` should be a positive integer");const i=[],a=Math.ceil(t.length/e);for(let u=0;u<a;u++)i.push(t.slice(u*e,(u+1)*e));return i},"chunk"),V=r((t,e,s)=>Math.min(Math.max(s,t),e),"clamp"),H=A.div.withConfig({componentId:"sc-1lk1nlv-0"})([""]),X=A.ul.withConfig({componentId:"sc-1lk1nlv-1"})(["display:flex;width:100%;gap:var(--carousel-gap,0);padding:0;margin:0;list-style:none;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:visible;scroll-behavior:smooth;scroll-snap-type:x mandatory;",""],_),Y=A.nav.withConfig({componentId:"sc-1lk1nlv-2"})([""]),J=A.li.withConfig({componentId:"sc-1lk1nlv-3"})(["display:flex;scroll-snap-align:start;"]),Q={children:C.node,className:C.string,initialIndex:C.number,ButtonNext:C.elementType,ButtonPrev:C.elementType};function U(t){const{target:e}=t;if(e){const s=e.type;if(s&&s==="checkbox")return!0}return!1}r(U,"isCheckbox");function Z(t,e,s){var n;(n=document.activeElement)==null||n.scrollIntoView({behavior:t,block:e,inline:s})}r(Z,"scrollActiveElIntoView");const $=r(({root:t,behavior:e="smooth",block:s="nearest",inline:n="center"})=>c.useEffect(()=>{const o=t.current;function i(a){if(U(a))return;(o==null?void 0:o.contains(document.activeElement))&&Z(e,s,n)}return r(i,"handleFocused"),o==null||o.addEventListener("focusin",i),()=>{o==null||o.removeEventListener("focusin",i)}},[t,e,s,n]),"useScrollToFocusedElement"),K=r(()=>{const t=c.useRef(null),e=r((n,o)=>(...i)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>n(...i),o)},"debounce");return c.useEffect(()=>()=>{t.current!==null&&(clearTimeout(t.current),t.current=null)},[]),c.useCallback(e,[])},"useDebounceWithHooks"),ee=r(({root:t,offsetKey:e})=>{const s=K(),n=t.current,o=s(()=>{if(e&&n){const i=(n==null?void 0:n.scrollLeft)??0;sessionStorage.setItem(e,i.toString())}},300);return c.useEffect(()=>{e&&n&&r(()=>{const a=sessionStorage.getItem(e);a!==null&&n&&(n.scrollLeft=parseInt(a,10))},"setInitialOffset")()},[e,n]),[o]},"useScrollToOffset"),te=r(({nodes:t,root:e})=>{const s=c.useRef(null),[n,o]=c.useState(t.map(()=>!1)),[i,a]=c.useState(!0),[u,j]=c.useState(!0);return c.useEffect(()=>{const R=r(d=>d.forEach(l=>{const{target:h,isIntersecting:w,intersectionRatio:I}=l,f=t.findIndex(g=>g===h),S=w&&I>.9,y=w&&I>.1,T=f===0,k=f===t.length-1;o(g=>{const b=[...g];return b[f]=y,b}),T&&a(S),k&&j(S)}),"handleIntersect");return s.current=new IntersectionObserver(R,{threshold:[.1,.5,.9],root:e.current,rootMargin:"-1px"}),t.forEach(d=>{var l;(l=s.current)==null||l.observe(d)}),()=>{var d;return(d=s.current)==null?void 0:d.disconnect()}},[e,t]),[n,i,u]},"useVisibleIndexes"),O=r(({className:t,items:e,ButtonNext:s,ButtonPrev:n,renderSlide:o,...i})=>{const{initialIndex:a=W,increment:u=D,offsetKey:j=G}=i,d=z(e,u),l=c.useRef(),h=c.useRef([]),w=c.useRef([]),I=0,f=e.length-1,[S]=ee({root:l,offsetKey:j}),[y,T,k]=te({nodes:h.current,root:l}),g=!(T&&k),b=c.useCallback((E=0)=>{var p,N,P;const m=V(I,f,E),x=(N=(p=h==null?void 0:h.current)==null?void 0:p.at(m))==null?void 0:N.offsetLeft;if((P=l==null?void 0:l.current)!=null&&P.scrollTo){const F="smooth";l.current.scrollTo({top:0,left:x,behavior:F})}},[l,I,f]);c.useEffect(()=>{b(a)},[a,b]),$({root:l,behavior:"smooth",block:"nearest",inline:"center"});const L=c.useCallback(E=>{const m=y.findIndex(p=>p),x=V(I,f,m+E);b(x)},[y,f,b]),q=r(()=>L(-1),"handlePrevClick"),B=r(()=>L(1),"handleNextClick");return v.jsxs(H,{className:t,children:[v.jsx(X,{ref:l,onScroll:S,children:d.map((E,m)=>v.jsx(J,{ref:x=>h.current[m]=x,children:E.map((x,p)=>o({slideIndex:p,itemIndex:m*u+p,item:x,isVisible:!!y[m],ref:N=>{w.current[p]=N}}))},m))}),g&&v.jsxs(Y,{children:[v.jsx(n,{disabled:T,onClick:q}),v.jsx(s,{disabled:k,onClick:B})]})]})},"Carousel");O.displayName="Carousel";O.propTypes=Q;O.__docgenInfo={description:"",methods:[],displayName:"Carousel",props:{children:{description:"",type:{name:"node"},required:!1},className:{description:"",type:{name:"string"},required:!1},initialIndex:{description:"",type:{name:"number"},required:!1},ButtonNext:{description:"",type:{name:"elementType"},required:!1},ButtonPrev:{description:"",type:{name:"elementType"},required:!1}}};export{O as C,J as G,W as I,Y as N,X as S};
